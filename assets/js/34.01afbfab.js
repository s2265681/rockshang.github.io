(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{370:function(t,e,s){"use strict";s.r(e);var n=s(16),a=Object(n.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"网络编程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络编程"}},[t._v("#")]),t._v(" 网络编程")]),t._v(" "),s("p",[s("strong",[t._v("网络分层")]),t._v(" "),s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191123132806441.png",alt:"网络层"}})]),t._v(" "),s("p",[s("strong",[t._v("安装telnet")]),t._v('\n/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"')]),t._v(" "),s("p",[t._v("brew install telnet")]),t._v(" "),s("p",[t._v("测试\ntelnet toutiao.com 80")]),t._v(" "),s("p",[t._v("tcp ip 编程 套接字编程")]),t._v(" "),s("p",[s("strong",[t._v("通过Telent链接服务器，建立tcp链接")])]),t._v(" "),s("ul",[s("li",[t._v("实现一个即时通讯")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(" 打开  node telnet.js\n 分屏  telnet localhost 9000\n")])])]),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191123141031833.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("HTTP协议")])]),t._v(" "),s("p",[t._v("开始建立非常朴素\n无连接\n无状态\n简单灵活")]),t._v(" "),s("p",[t._v("上行  发 resquest  - > 请求行 （Method url 版本）、消息报头（各种定义 contentType定义了请求正文的内容） 、 请求报文\n下行  收 response  - > 状态行 （状态码）、 消息报头（响应报头、实体报头）、 响应正文")]),t._v(" "),s("p",[s("strong",[t._v("总结：get 、 post 的区别")]),t._v("\n1、get回退无害、post会再次提交\n2、get需要url编码，有长度限制、能对url地址收藏，能被浏览器缓存\n3、post更安全，长度无限制")]),t._v(" "),s("p",[t._v("GET 用于获取信息，是无副作用的，是幂等的，且可缓存\nPOST 用于修改服务器上的数据，有副作用，非幂等，不可缓存")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(" // 观察HTTP协议\n curl -v http://www.baidu.com\n\n")])])]),s("p",[s("strong",[t._v("应答码，状态码")]),t._v("\n1XX 已经接收，继续处理\n2XX: 成功\n3XX 重定向，要完成请求必须进行进一步操作\n4XX：客户端错误\n5XX 服务器错误")]),t._v(" "),s("p",[t._v("200 客户请求成功\n400 客户请求语法错误，不能被服务器理解\n401 请求未经授权\n404 请求资源不存在\n500 服务器发生了不可逾期的错误")]),t._v(" "),s("p",[s("strong",[t._v("同域环境调http请求")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<script src=\"https://unpkg.com/axios/dist/axios.min.js\"><\/script>\n<script>\n   (async ()=>{\n     const res = await axios.get('/users')\n     console.log('data',res.data)\n   })()\n<\/script>\n\n")])])]),s("p",[s("strong",[t._v("解决跨域")]),t._v("\nnpm i live-server -g\n"),t._v('\naxios.defaults.baseURL = "http://localhost:3004\n制造跨域环境')]),t._v(" "),s("p",[s("strong",[t._v("跨域")]),t._v("\n-协议名、端口号、域名（子域名不同）")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Access to XMLHttpRequest at 'http://localhost:3003/users' from origin 'http://127.0.0.1:5500' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.\n")])])]),s("p",[s("strong",[t._v("常用解决跨域的方案")]),t._v("\n1、JSONP(JSON with Padding),前端加后端方案，绕过跨域\n前端构造script标签请求URL（由script标签发出的GET请求不受同源策略限制），服务器返回一个函数执行语句，该函数通常由查询参callback的值决定，函数的参数为服务器返回的json数据，该函数在前端执行后即可获取数据")]),t._v(" "),s("ul",[s("li",[t._v("很不常用了，只能发get请求，")])]),t._v(" "),s("p",[t._v("2、代理服务器\n请求同源服务器，通过该服务器转发请求至目标服务器，得到结果后在转发到前端\n前端开发中测试服务器的代理功能就是采用的该解决方案，但是最终发布上线时如果web应用和接口服务器不在一起仍会跨域。")]),t._v(" "),s("p",[t._v("3、CORS（Cross Orign Resource Share）跨域资源共享，后端方案，解决跨域\n原理：cors时w3c规范，真正意义上解决跨域问题，它需要服务器对请求进行检查并对响应头做响应处理，从而允许跨域请求")]),t._v(" "),s("p",[t._v("具体实现：")]),t._v(" "),s("ul",[s("li",[t._v("响应简单请求动词为get/post/head，没有自定义请求头。Content-Type是applicatin/x-www-form-urlencodd，multipart/form-data或text/plain之一，通过该添加一下响应头解决：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(" res.setHeader('Access-Control-Allow-Origin','http://127.0.0.1:8080')\n")])])]),s("ul",[s("li",[t._v("加上header后复杂的请求，不能跨域（原因 简单的请求之外的预检请求）\nPUT DELETE OPTIONS 人为的设置header等 需要预检\n加上预检请求头")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    'Access-Control-Allow-Headers':\"X-token,Content-Type\"\n\n")])])]),s("p",[s("strong",[t._v("反向代理和代理区别")]),t._v("\n正向代理靠近浏览器端\nngixn 代理静态资源 把这些转发和正向相反 跟靠近服务器方向")]),t._v(" "),s("p",[t._v("如果携带cookie\n同源可以\n不同源时")]),t._v(" "),s("ol",[s("li",[t._v("页面中加axios.default.withCredentials = true")]),t._v(" "),s("li",[t._v("服务器设置header\nres.setHeader('Access-Control-Allow-Credentials','true')\n在浏览器看不到但是可以获取到cookie了\nconsole.log('cookie',res.headers.cookie)")])]),t._v(" "),s("p",[s("strong",[t._v("实战一个爬虫")]),t._v("\n->splider.js\n->splider-mongo.js\n原理：服务端模拟客户端发送请求到目标服务器获取页面内容并解析，获取其中关注部分的数据\n--\x3esplider.js\ngithub地址\nhttp://github.com/su37josephxia/spider")]),t._v(" "),s("p",[s("strong",[t._v("实现一个即时通讯工具")]),t._v("\nim服务器\n--\x3e im/\n原理：Net模块提供一个异步API能狗创建基于流的TCP服务器，客户端与服务器建立连接后，服务器可以或得一个全双工Socket对象，服务器可以保存Scket对象列表，在接收某客户端消息时，推送给其他客户端")]),t._v(" "),s("p",[t._v("服务器没有办法给直接给浏览器推消息，只能轮询")]),t._v(" "),s("p",[s("strong",[t._v("Socket.Io")])]),t._v(" "),s("ul",[s("li",[t._v("支持优雅降级 不支持Io的话有折中方式来支持")]),t._v(" "),s("li",[t._v("WebSocket")]),t._v(" "),s("li",[t._v("源于HTML5标准")])]),t._v(" "),s("p",[s("strong",[t._v("Http2")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("多路复用 -雪碧图、多域名CDN、接口合并")])]),t._v(" "),s("li",[s("p",[t._v("官方演示：https://http2.akamai.com/demo")])]),t._v(" "),s("li",[s("p",[t._v("多路服用允许同时通过单一的HTTP/2链接发起多重响应，而HTTP/1.1协议中，浏览器客户端在同一时间，针对同一域名吓得请求有一定数量限制，超过限制数目的请求会被阻赛。")])]),t._v(" "),s("li",[s("p",[t._v("首部压缩")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("在http/1X的header中由于cookie和user agent 很容易膨胀，每次都需要重复发送，http2使用了encoder来减少需要传输的header大小")])]),t._v(" "),s("li",[s("p",[t._v("服务端推送")])]),t._v(" "),s("li",[s("p",[t._v("在http2中，服务器可以对库户的一个请求发送多个响应")])]),t._v(" "),s("li",[s("p",[t._v("前端基础知识汇总")])])]),t._v(" "),s("p",[t._v("https://github.com/su37josephxia/frontend-basic")]),t._v(" "),s("ul",[s("li",[t._v("processon 脑图")])]),t._v(" "),s("p",[t._v("https://www.processon.com/mindmap/5ddfe913e4b074c442ec8b8a")])])])])}),[],!1,null,null,null);e.default=a.exports}}]);